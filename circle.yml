## Customize the test machine
machine:
  environment:
    ROS_DISTRO: hydro

## Customize dependencies
dependencies:
  pre:
    - sudo rm -r /etc/apt/sources.list.d
    - sudo mkdir -p /etc/apt/sources.list.d
    - sudo apt-get purge libboost*
    - sudo apt-get install libboost1.46-dev
    - sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu precise main" > /etc/apt/sources.list.d/ros-latest.list'
    - wget https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -O - | sudo apt-key add -
    - sudo apt-get update -qq
    - echo ${ROS_DISTRO}
  override: 
    - sudo apt-get install -qq -y ros-${ROS_DISTRO}-ros-base ros-${ROS_DISTRO}-geometry-msgs
    - sudo rosdep init
    - rosdep update

## Customize test commands
test:
  pre:
    - mkdir -p ~/catkin_ws/src
    - mv $CIRCLE_PROJECT_REPONAME ~/catkin_ws/src
    - cd ~/catkin_ws/src
    - source /opt/ros/hydro/setup.bash && catkin_init_workspace
    - cd ..
  override:
    - catkin_make -DCMAKE_BUILD_TYPE=Release
    - catkin_make run_tests_$CIRCLE_PROJECT_REPONAME
#  post:


## Custom notifications
#notify:
#  webhooks:
    # A list of hashes representing hooks. Only the url field is supported.
#    - url: https://someurl.com/hooks/circle

#override:
#    - ENV_VAR=first source /opt/ros/$ROS_DISTRO/setup.bash && rospack profile && roscd hull_cleaner && make && make test

